<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Journal - Driving Mode</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìù</text></svg>">
    <link rel="stylesheet" href="/static/theme.css">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/static/voice.css">
</head>
<body>
    <div class="container">
        {% include 'partials/header.html' %}

        <main class="voice-main">
            <nav class="app-nav" aria-label="Session type" style="margin-bottom:16px;">
                <button id="reflectionBtn" class="nav-btn btn btn--secondary active" data-type="reflection">Daily Reflection</button>
                <button id="planningBtn" class="nav-btn btn btn--ghost" data-type="planning">Planning</button>
                <button id="notesBtn" class="nav-btn btn btn--ghost" data-type="notes">Brain Dump</button>
                <button id="goalsBtn" class="nav-btn btn btn--ghost" data-type="goals">Goals</button>
            </nav>

            <div class="connection-status chip" id="connectionStatus">
                <span class="status-dot"></span>
                <span class="status-text">Select a mode</span>
            </div>

            <!-- Session Type Selection (hidden for now) -->
            <div class="session-selector surface" id="sessionSelector" style="display: none;">
                <h2>Choose Your Journal Mode</h2>
                <div class="session-buttons" aria-label="Session type">
                    <button class="session-btn" data-type="reflection">
                        <div class="session-icon">üåÖ</div>
                        <div class="session-title">Daily Reflection</div>
                        <div class="session-desc">Process your day</div>
                    </button>
                    <button class="session-btn" data-type="planning">
                        <div class="session-icon">üìã</div>
                        <div class="session-title">Planning</div>
                        <div class="session-desc">Organize tomorrow</div>
                    </button>
                    <button class="session-btn" data-type="notes">
                        <div class="session-icon">üß†</div>
                        <div class="session-title">Brain Dump</div>
                        <div class="session-desc">Capture all thoughts</div>
                    </button>
                    <button class="session-btn" data-type="goals">
                        <div class="session-icon">üéØ</div>
                        <div class="session-title">Goals</div>
                        <div class="session-desc">Review objectives</div>
                    </button>
                </div>
            </div>

            <!-- Voice Interface -->
            <div id="voicePanel" class="chat-container surface">
                <div class="voice-interface" id="voiceInterface">
                <!-- Audio Visualization -->
                <div class="audio-visualizer" id="audioVisualizer">
                    <div class="wave-container">
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                    </div>
                </div>

                <!-- Status Display -->
                <div class="voice-status" id="voiceStatus">
                    <div class="status-message" role="status" aria-live="polite">Select a session type to begin</div>
                    <div class="listening-indicator">
                        <div class="pulse-ring"></div>
                        <div class="pulse-ring"></div>
                        <div class="pulse-ring"></div>
                    </div>
                </div>

                <!-- Transcript Display -->
                <div class="transcript-container" id="transcriptContainer">
                    <div class="transcript-scroll" id="transcriptScroll">
                        <!-- Transcripts will be added here -->
                    </div>
                </div>

                <!-- Control Buttons -->
                <div class="voice-controls">
                    <button class="btn btn--ghost mute-btn" id="muteBtn" title="Mute/Unmute" aria-label="Mute or unmute">
                        <span class="btn-icon">üîä</span>
                        <span class="btn-text">Mute</span>
                    </button>
                    <button class="btn btn--ghost pause-btn" id="pauseBtn" title="Pause Session" aria-label="Pause session">
                        <span class="btn-icon">‚è∏Ô∏è</span>
                        <span class="btn-text">Pause</span>
                    </button>
                    <button class="btn btn--danger end-btn" id="endBtn" title="End Session" aria-label="End session">
                        <span class="btn-icon">‚èπÔ∏è</span>
                        <span class="btn-text">End</span>
                    </button>
                </div>
            </div>
            </div>

            <!-- Loading Screen -->
            <div class="loading-screen" id="loadingScreen">
                <div class="loading-spinner"></div>
                <div class="loading-text">Starting voice session...</div>
            </div>

            <!-- Error Screen -->
            <div class="error-screen hidden" id="errorScreen">
                <div class="error-icon">‚ö†Ô∏è</div>
                <div class="error-message" id="errorMessage">Something went wrong</div>
                <button class="retry-btn" id="retryBtn">Try Again</button>
                <a href="/" class="back-link">‚Üê Back to Text Mode</a>
            </div>
        </main>

    </div>

    <script src="/static/voice.js?v=2"></script>
</body>
</html>
